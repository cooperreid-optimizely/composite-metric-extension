window.optimizely=window.optimizely||[],window.__optCompositeTracker=function(){var e=!localStorage.getItem("__optCompositeTrackerDebug")?{log:function(){},group:function(){},groupEnd:function(){},groupCollapsed:function(){},dir:function(){}}:console;e.log("+++ Project JS");var n="__optCompositeTracker",t=function(e){localStorage.setItem(n,JSON.stringify(e))},o=function(){try{return JSON.parse(localStorage.getItem(n))}catch(e){return{}}},i=function(e){window.optimizely.push({type:"event",eventName:e})},a=function(n){var a=o(),r=!1;for(extensionInstance in a){var s=a[extensionInstance].composite_metric_api_name,c=a[extensionInstance].event_list.split(/,\s*/);!!a[extensionInstance].composite_fired?e.log("+++ Already fired composite metric"):(a[extensionInstance].fired||(a[extensionInstance].fired={}),e.log("+++ Heard: "+n,"Already fired:",a[extensionInstance].fired," check against ",c),c.indexOf(n)>-1&&!(n in a[extensionInstance].fired)&&(e.log("+++ New evt",n),a[extensionInstance].fired[n]=1,r=!0),c.sort().join()===Object.keys(a[extensionInstance].fired).sort().join()&&(e.log("+++ Saw all events, fire:",s),a[extensionInstance].composite_fired=1,i(s),r=!0))}r&&t(a)};return window.optimizely.push({type:"addListener",filter:{type:"analytics",name:"trackEvent"},handler:function(e){a(e.data.apiName||e.data.name)}}),e.log("+++ Init __optCompositeTracker v0.1"),{getParams:o,getParams:o,setParams:function(o){var i=JSON.parse(localStorage.getItem(n))||{};i[o.instance]=Object.assign(i[o.instance]||{},o),e.log("+++ ALL EXT DATA",i,o),e.log("+++ SET PARAMS",n,i),t(i)},heardEvent:a}}();