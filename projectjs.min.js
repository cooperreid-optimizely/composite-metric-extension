window.optimizely=window.optimizely||[],window.__optCompositeTracker=function(){var e=!localStorage.getItem("__optCompositeTrackerDebug")?{log:function(){},group:function(){},groupEnd:function(){},groupCollapsed:function(){},dir:function(){}}:console;e.log("+++ Project JS");var n="__optCompositeTracker",t=function(e){localStorage.setItem(n,JSON.stringify(e))},o=function(){try{return JSON.parse(localStorage.getItem(n))}catch(e){return{}}},a=function(e){window.optimizely.push({type:"event",eventName:e})},i=function(n){var i=o(),r=!1;for(extensionInstance in i){var s=i[extensionInstance].composite_metric_api_name;!!i[extensionInstance].composite_fired?e.log("+++ Already fired composite metric"):(e.log("+++ Heard: "+n,"Events: ",i[extensionInstance].events),n in i[extensionInstance].events&&(i[extensionInstance].events[n]=1,e.log("+++ Mark event tracked",i[extensionInstance].events),r=!0),Object.values(i[extensionInstance].events).every(function(e){return 1===e})&&(e.log("+++ Saw all events, fire:",s),i[extensionInstance].composite_fired=1,a(s),r=!0))}r&&t(i)};return window.optimizely.push({type:"addListener",filter:{type:"analytics",name:"trackEvent"},handler:function(e){i(e.data.apiName||e.data.name)}}),e.log("+++ Init __optCompositeTracker v0.3"),{getParams:o,getParams:o,setParams:function(o){var a=JSON.parse(localStorage.getItem(n))||{};a[o.instance]=Object.assign(o||{},a[o.instance]||{}),e.log("+++ ALL EXT DATA",a,o),e.log("+++ SET PARAMS",n,a),t(a)},heardEvent:i}}();